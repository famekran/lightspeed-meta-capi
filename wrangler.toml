name = "lightspeed-meta-capi"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Account
account_id = "2febeaec7b825dc19b659d7e783cf622"

# Worker Settings
workers_dev = true

# R2 Bindings (optioneel - voor logging)
# Uncomment als je R2 logging wilt gebruiken
# [[r2_buckets]]
# binding = "LOGS"
# bucket_name = "lightspeed-meta-logs"

# KV Namespaces
# 1. Order deduplication (prevent duplicate webhook processing)
[[kv_namespaces]]
binding = "ORDER_DEDUP"
id = "c261da492df0431d8ca4e74e71cb046e"
preview_id = "b7e3dee45ea84127b70a7d563425f041"

# 2. Pixel data storage (fbc, fbp from browser)
[[kv_namespaces]]
binding = "PIXEL_DATA_KV"
id = "12eed91ee98246308b01517ba9bd677f"
preview_id = "95434db769cb4823a955d9d48db9173d"

# Environment Variables (non-sensitive only)
[vars]
NODE_ENV = "production"
DEBUG_MODE = "false"

# Cron Triggers - Backup polling every hour (webhook is primary)
[triggers]
crons = ["0 * * * *"]  # Every hour at :00 (00:00, 01:00, 02:00, etc.)

# Secrets (gebruik wrangler secret put voor deze)
# Deze zijn NIET in deze file, maar via CLI:
# wrangler secret put META_ACCESS_TOKEN
# wrangler secret put META_PIXEL_ID
# wrangler secret put LIGHTSPEED_API_KEY
# wrangler secret put LIGHTSPEED_API_SECRET
# wrangler secret put WEBHOOK_SECRET

# Triggers (optioneel - cron jobs)
# [triggers]
# crons = ["0 */4 * * *"]  # Elke 4 uur

# Build Configuration
[build]
command = "npm run build"

# Development Settings
[dev]
port = 8787
local_protocol = "http"
